<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="中电科物联网开放平台"/>
    <meta name="description" content="中电科物联网开放平台"/>
    <title>中电科物联网开放平台-动态感知-势态分布-查看设备</title>
    <link rel="shortcut icon" href="/assets/img/sentilo/favicon.ico">

    <link href="/less/style.css" rel="stylesheet" type="text/css"/>
    <!--让IE6、IE7、IE8支持html5和css3开始-->
    <!--[if lt IE 9]>
    <script src="/assets/common/js/html5.js" type="text/javascript" language="javascript"></script>
    <script src="/assets/common/js/selectivizr.js" type="text/javascript" language="javascript"></script>
    <script src="/assets/common/js/PIE.js" type="text/javascript" language="javascript"></script>
    <![endif]-->
    <!--让IE6、IE7、IE8支持html5和css3结束-->
    <!--IE6支持png图片透明开始-->
    <!--[if IE 6]>
    <script src="/assets/common/js/DD_belatedPNG.js" mce_src="DD_belatedPNG.js" type="text/javascript"></script>
    <script type="text/javascript">
        DD_belatedPNG.fix('a, div, ul, img, input, span');
    </script>
    <![endif]-->
    <!--IE6支持png图片透明结束-->
    <script src="/assets/common/js/jquery-1.9.1.min.js" type="text/javascript" language="javascript"></script>
    <script src="/assets/common/js/echarts.min.js" type="text/javascript" language="javascript"></script>
    <script src="/assets/scripts/sentilo/jquery.SuperSlide.2.1.1.js" type="text/javascript" language="javascript"></script>
    <!--jquery-ui开始-->
    <link href="/assets/common/jquery-ui/css/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css"/>
    <script src="/assets/common/jquery-ui/js/jquery-ui-1.8.16.custom.min.js" type="text/javascript" language="javascript"></script>
    <!--jquery-ui结束-->


    <!--加载数据加载动画-->
    <link type="text/css" href="/assets/css/sentilo/jquery.shCircleLoader.css" rel="stylesheet"/>
    <script type="text/javascript" src="/assets/scripts/sentilo/jquery.shCircleLoader-min.js"></script>
    <script type="text/javascript" src="/assets/scripts/sentilo/Loading.js"></script>
    <!--加载数据加载动画结束-->
    <!--地图模块开始-->
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=eamDDEk7gqfPzu0EWYlly7HgaV44YfLA"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/InfoBox/1.2/src/InfoBox_min.js"></script>
    <script type="text/javascript" src="http://developer.baidu.com/map/custom/stylelist.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/MapWrapper/1.2/src/MapWrapper.min.js"></script>
    <script type="text/javascript" src="/assets/scripts/gis/mapstyle.js"></script>


    
    <!--地图模块结束-->
    <link rel='stylesheet' href='/less/style.css' />
</head>
<body>
<!--页面开始-->


    <% include ../../../common/header.ejs%>

<div class="page">
    <div class="cksb">

       <div class="cksb_top">
          
              <img src="/images/h1.png">设备详情信息 <%= compoent.id %>
          
       </div>

        <div class="cksb_b">
            <div class="cksb_b_left">
                <div class="cksb_b_img">
                    <img src="/assets/img/sentilo/stfb_a.png"/>
                </div>

                <div class="cksb_b_left_r">

                    <ul>
                        <li>
                            <span>设备名</span> <%= compoent.componentName %>
                        </li>
                        <li>
                            <span>所属用户</span> <%= compoent.belongto %>
                        </li>
                        <li>
                            <span>设备类型</span> <%= compoent.componentType %>
                        </li>
                        <li>
                            <span>传输协议</span> <%= compoent.transportType %>
                        </li>
                        <li>
                            <span>设备状态</span> <%= compoent.operationStatus %>
                        </li>
                    </ul>


                </div>
            </div>
            <div class="cksb_b_right">
                <div class="cksb_b_left_top">
                    <img src="/assets/img/sentilo/stfb_b.png"/>
                    实时数据
                </div>
                <div class="cksb_b_left_bottom">

                    <ul>
                        <% if( compoent.sensors) {%>
                            <% for(var i= 0;i<compoent.sensors.length;i++){%>
                                <li>
                                    <span title=" <%= compoent.sensors[i].name%>">
                                       <%= compoent.sensors[i].name%>
                                    </span>
                                    <span title="<%= compoent.sensors[i].value%>">
                                        <%= compoent.sensors[i].value%>
                                    </span>
                                </li>
                            <%}%>
                        <%}else {%>
                        <li>
                            <span>
                                暂无信息
                            </span>
                            <span>
                                暂无信息
                            </span>
                        </li>
                        <%}%>

                    </ul>
                    <div class="cksb_b_date">

                        <img src="/images/icon1.png">

                        <span class="cksb_b_date_d">
                            <%= compoent.sensors[0].recordTime%>
                        </span>
                         <span class="cksb_b_date_word">
                                更新时间
                         </span>
                    </div>

                </div>
            </div>
        </div>

        <div class="cksb_d">
            <div class="cksb_d_left">
                <div class="cksb_d_left_top">
                    <img src="/assets/img/sentilo/stfb_d.png"/>
                    详细信息

                </div>
                <div class="cksb_d_left_bottom">

                    <ul>
                        <li><sapn class="li_left">标识码</sapn>testApp_provider.DB
                        </li>
                        <li><sapn class="li_left">生产商</sapn>江苏赛达
                        </li>
                        <li><sapn class="li_left">描述</sapn>晋安区主管网水流量检测</li>
                        <li><sapn class="li_left">供电方式</sapn>交流电(220VAC)</li>
                        <li><sapn class="li_left">位置状态</sapn>静态</li>
                        <li><sapn class="li_left">MAC</sapn>EO-05-C5-27-96-32</li>
                        <li><sapn class="li_left">创建日期</sapn>2016/10/13 09:19</li>
                        <li><sapn class="li_left">经纬度</sapn><span class="cksb_d_left_bottom_a">119.5423°N</span><span>24.2367°E</span></li>
                    </ul>

                </div>
            </div>
            <div class="cksb_d_right">
                <div class="cksb_d_right_top">
                    <img src="/assets/img/sentilo/stfb_e.png"/>
                    位置
                </div>
                <div class="cksb_d_right_bottom">
                    <div id="map" style="width: 100%;height: 400px"  ></div>
                </div>
            </div>
        </div>

    </div>
<!--页面结束-->
    <script type="text/javascript" language="javascript">

/**
 *获取icon图片路径
 */
function getIconIndexByType(type) {
    switch (type) {
        case "光照度检测仪":
            return "0000.png";
        case "测速仪":
            return "0001.png";
        case "称重仪":
            return "0002.png";
        case "酸碱度PH计":
            return "0003.png";
        case "粉尘浓度探测器":
            return "0004.png";
        case "风速测量计":
            return "0005.png";
        case "超声波流量计":
            return "0006.png";
        case "气体分析仪":
            return "0007.png";
        case "电磁辐射":
            return "0008.png";
        case "湿度计":
            return "0009.png";
        case "气压计":
            return "0010.png";
        case "噪音计":
            return "0011.png";
        case "温度计":
            return "0012.png";
        case "电表":
            return "0013.png";
        case "水质监测仪":
            return "0014.png";
        case "智能水表":
            return "0015.png";
        case "自动气象站":
            return "0016.png";
        case "环境探测器":
            return "0017.png";
        default :
            return "0000.png"
    }
};


    $(document).ready(function () {

            var type1 = "<%= compoent.componentType%>";
            var s = getIconIndexByType(type1);
            var src = "/assets/img/sentilo/map-icons/component_detail/"+s+"";
            $(".cksb_top img").attr("src",src);

    });


// 百度地图加载
var map = new BMap.Map("map", {enableMapClick: false});    // 创建Map实例
//map.centerAndZoom(new BMap.Point(119.317023, 26.066687), 12);  // 初始化地图,设置中心点坐标和地图级别
var lat = <%= compoent.lat%>;
var lon = <%= compoent.lon%>;
var point = new BMap.Point(lon,lat);
map.centerAndZoom(point, 13);  // 初始化地图,设置中心点坐标和地图级别 中心点为石河子市
//map.addControl(new BMap.MapTypeControl({mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP]}));   //添加地图类型控件

map.enableScrollWheelZoom();   //启用滚轮放大缩小，默认禁用
map.enableContinuousZoom();    //启用地图惯性拖拽，默认禁用

///地图样式
map.setMapStyle({styleJson: styleJson});
//map.setMapStyle({style: 'midnight'});

var overView = new BMap.OverviewMapControl();
var overViewOpen = new BMap.OverviewMapControl({isOpen: true, anchor: BMAP_ANCHOR_BOTTOM_RIGHT});

///添加默认缩略地图控件
//map.addControl(overView);
//map.addControl(overViewOpen); //右下角，打开



var marker = new BMap.Marker(point);  // 创建标注
map.addOverlay(marker);               // 将标注添加到地图中
marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画

    </script>
    </div>
</body>
</html>